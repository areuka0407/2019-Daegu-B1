<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>부산국제영화제</title>
    <script src="js/jquery-3.4.1.min.js" type="text/javascript"></script>
    <script src="bootstrap-4.4.1-dist/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="bootstrap-4.4.1-dist/css/bootstrap.css">
    <link rel="stylesheet" href="fontawesome/css/all.css">
    <script src="fontawesome/js/all.js" src="text/javascript"></script>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/admin.css">
    <script src="js/common.js" type="text/javascript" defer></script>
</head>
<body>
     <!-- 헤더 영역 -->
     <header>
        <div class="container d-flex justify-content-between align-items-center">
            <a href="index.html" id="logo">
                <img src="images/logo.png" title="부산국제영화제" alt="부산국제영화제" height="80">
            </a>
            <div class="nav">
                <div class="item">
                    <a href="admin-sponsor.html">스폰서 관리</a>
                </div>
                <div class="item active">
                    <a href="admin-screen.html">상영작/요청작 관리</a>
                    <div class="under-box">
                        <a href="admin-screen.html">공식 상영작 관리</a>
                        <a href="admin-request.html">요청작 관리</a>
                        <a href="admin-timetable.html">상영시간표</a>
                    </div>
                </div>
                <div class="item">
                    <a href="admin-cinema.html">영화관 관리</a>
                </div>
            </div>
            <div class="sub-nav">
                <a href="#" class="item">로그아웃</a>
            </div>
        </div>
    </header>
    <!-- 상영 등록 영역 -->
    <div id="admin-request">

        <div class="container padding">
            <div class="section-title">
                <span class="behind">M</span>
                <h1>REQEUST <span>MANAGE</span></h1>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="sub-title">
                        <h1>LIST</h1>
                    </div>
                    <table class="table text-center">
                        <thead>
                            <tr>
                                <th>영화 제목</th>
                                <th>감독</th>
                                <th>러닝타임</th>
                                <th>상태</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="movie-title">뭔가 멋있는 영화</td>
                                <td>김민재</td>
                                <td>1시간 32분</td>
                                <td>미승인</td>
                                <td>
                                    <button class="btn btn-primary">승인</button>
                                    <button class="btn btn-danger">반려</button>
                                </td>
                            </tr>
                            <tr>
                                <td class="movie-title">유아용 영화</td>
                                <td>김재이</td>
                                <td>1시간 54분</td>
                                <td>미승인</td>
                                <td>
                                    <button class="btn btn-primary">승인</button>
                                    <button class="btn btn-danger">반려</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <script defer>
        window.onload = () => {
            document.querySelectorAll(".movie-title").forEach(x => {
                x.addEventListener("click", e => {
                    let exist = document.querySelector(".modal-wrap");
                    if(exist){
                        jQuery(exist).fadeOut('fast', () => exist.remove());
                    }

                    const company_name = "완전 멋있는 영화사";
                    const business_id = "123-12-12345";
                    const ceo_phone = "010-1234-1234";
                    const ceo_email = "example@gmail.com";

                    let modal = getModal({company_name, business_id, ceo_phone, ceo_email});
                    document.body.append(modal);
                    jQuery(modal).hide();
                    jQuery(modal).fadeIn();
                });
            });


            function getModal({company_name, business_id, ceo_phone, ceo_email}){
                let wrap = document.createElement("div");
                wrap.classList.add("modal-wrap");
                wrap.innerHTML = ` <div class="contents">
                                        <button class="btn-close">&times;</button>
                                        <dl>
                                            <dt>영화사명</dt>
                                            <dd>${company_name}</dd>
                                            <dt>사업자등록번호</dt>
                                            <dd>${business_id}</dd>
                                            <dt>영화사 대표 이메일</dt>
                                            <dd>${ceo_email}</dd>
                                            <dt>영화사 대표 전화번호</dt>
                                            <dd>${ceo_phone}</dd>
                                        </dl>
                                    </div>`;            

                wrap.querySelector(".btn-close").addEventListener("click", () => {
                    jQuery(wrap).fadeOut('fast', () => wrap.remove());
                });
                return wrap;
            }
        };
    </script>
</body>
</html>